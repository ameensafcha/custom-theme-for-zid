<section
  section-id="{{ sectionId }}"
  class="relative flex min-h-[700px] items-center justify-center overflow-hidden px-4 py-6 md:min-h-[480px] md:px-16 md:py-32"
>
  {% if settings.background_image %}
    <div
      class="absolute inset-0 -z-10 bg-cover bg-center bg-no-repeat md:bg-bottom"
      style="background-image:url('{{ settings.background_image }}')"
    >
      <div class="absolute inset-0 bg-white/10"></div>
    </div>
  {% endif %}
  <div class="theme-container">
    <div class="countdown-content grid gap-x-20 gap-y-8 lg:grid-cols-12 lg:items-center">
      <div class="space-y-6 lg:col-span-6">
        <div>
          {% if settings.badge_text %}
            <span class="text-foreground text-tagline uppercase">{{ settings.badge_text }}</span>
          {% endif %}
          {% if settings.title %}
            <h2 class="text-foreground text-h3 md:text-h1 uppercase">{{ settings.title }}</h2>
          {% endif %}
          {% if settings.description %}
            <p class="text-foreground text-h6">{{ settings.description }}</p>
          {% endif %}
        </div>
        {% if settings.button_text %}
          <a
            href="{{ settings.button_url | default('#') }}"
            class="bg-primary text-primary-foreground text-body1 ring-primary hover:bg-primary/90 inline-block rounded px-6 py-3 ring-1 hover:ring-2"
          >
            {{ settings.button_text }}
          </a>
        {% endif %}
      </div>
      <div class="lg:col-span-6">
        <div class="countdown-timer flex items-stretch gap-4 lg:justify-end">
          <div
            class="flex min-w-16 flex-col items-center justify-center rounded bg-white/30 p-2 text-center backdrop-blur-sm md:min-w-[98px]"
          >
            <span class="days-value text-foreground text-h3 md:text-h2"> 00 </span>
            <span class="text-foreground text-tagline uppercase"> {{ _('Day') }} </span>
          </div>
          <span
            aria-hidden="true"
            class="bg-border-disabled my-2 w-px"
          ></span>
          <div
            class="flex min-w-16 flex-col items-center justify-center rounded bg-white/30 p-2 text-center backdrop-blur-sm md:min-w-[98px]"
          >
            <span class="hours-value text-foreground text-h3 md:text-h2"> 00 </span>
            <span class="text-foreground text-tagline uppercase"> {{ _('Hour') }} </span>
          </div>
          <span
            aria-hidden="true"
            class="bg-border-disabled my-2 w-px"
          ></span>
          <div
            class="flex min-w-16 flex-col items-center justify-center rounded bg-white/30 p-2 text-center backdrop-blur-sm md:min-w-[98px]"
          >
            <span class="minutes-value text-foreground text-h3 md:text-h2"> 00 </span>
            <span class="text-foreground text-tagline uppercase"> {{ _('Min') }} </span>
          </div>
          <span
            aria-hidden="true"
            class="bg-border-disabled my-2 w-px"
          ></span>
          <div
            class="flex min-w-16 flex-col items-center justify-center rounded bg-white/30 p-2 text-center backdrop-blur-sm md:min-w-[98px]"
          >
            <span class="seconds-value text-foreground text-h3 md:text-h2"> 00 </span>
            <span class="text-foreground text-tagline uppercase"> {{ _('Sec') }} </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    (function () {
      const section = document.querySelector('[section-id="{{ sectionId }}"]');
      const endDate = new Date("{{ settings.end_date }}").getTime();
      const daysEl = section.querySelector(".days-value");
      const hoursEl = section.querySelector(".hours-value");
      const minutesEl = section.querySelector(".minutes-value");
      const secondsEl = section.querySelector(".seconds-value");
      const contentEl = section.querySelector(".countdown-content");

      if (!endDate || isNaN(endDate) || endDate <= new Date().getTime()) {
        contentEl.style.display = "none";
        return;
      }

      function updateCountdown() {
        const now = new Date().getTime();
        const distance = endDate - now;

        if (distance < 0) {
          if (interval) clearInterval(interval);
          section.style.display = "none";
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        daysEl.textContent = String(days).padStart(2, "0");
        hoursEl.textContent = String(hours).padStart(2, "0");
        minutesEl.textContent = String(minutes).padStart(2, "0");
        secondsEl.textContent = String(seconds).padStart(2, "0");
      }

      let interval;
      updateCountdown();
      interval = setInterval(updateCountdown, 1000);
    })();
  </script>
</section>
