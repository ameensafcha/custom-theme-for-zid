{# Optimize hero images for better LCP #}
{% set mobile_image = image_url(settings.background_image_mobile or settings.background_image, w=768, q=75, f='auto') %}
{% set desktop_image = image_url(settings.background_image, w=1920, q=75, f='auto') %}
{% set is_lazy = settings.order > 2 %}

<section
  section-id="{{ sectionId }}"
  class="relative flex items-center overflow-hidden px-4 md:px-16"
  data-variant="{{ settings.style_variant | default('default') }}"
>
  {# Background image using native img for better LCP #}
  <div class="absolute inset-0 -z-10">
    <picture>
      <source media="(min-width: 768px)" srcset="{{ desktop_image }}" />
      <img
        src="{{ mobile_image }}"
        alt="{{ settings.heading | default('') }}"
        class="h-full w-full object-cover"
        style="object-position: {{ settings.background_position | default('center') }}"
        {% if is_lazy %}loading="lazy"{% else %}fetchpriority="high"{% endif %}
      />
    </picture>
    <div
      class="bg-primary absolute inset-0"
      style="opacity: {{ settings.overlay_opacity | default(20) / 100 }}"
    ></div>
  </div>

  <div class="theme-container flex max-w-[960px] flex-col gap-20">
    <div class="flex max-w-[768px] flex-col gap-6">
      <div class="flex flex-col gap-4">
        {% if settings.badge_text and settings.badge_text | trim %}
          <span class="text-foreground text-tagline">{{ settings.badge_text }}</span>
        {% endif %}
        {% if settings.heading and settings.heading | trim %}
          {% if settings.is_primary_hero %}
            <h1 class="text-foreground text-h3 md:text-h1">{{ settings.heading }}</h1>
          {% else %}
            <h2 class="text-foreground text-h3 md:text-h1">{{ settings.heading }}</h2>
          {% endif %}
        {% endif %}
        {% if settings.description and settings.description | trim %}
          <p class="text-foreground text-h6">{{ settings.description }}</p>
        {% endif %}
      </div>
      {% if settings.button_text and settings.button_text | trim %}
        <div class="flex gap-4">
          <a
            href="{{ settings.button_url | default('#') }}"
            class="btn btn-filled btn-lg"
          >
            {{ settings.button_text }}
          </a>
        </div>
      {% endif %}
    </div>
  </div>

  {# prettier-ignore-start #}
  <style>
    [section-id="{{ sectionId }}"] {
      min-height: {{ settings.min_height_mobile | default(700) }}px;
    }

    @media (min-width: 768px) {
      [section-id="{{ sectionId }}"] {
        min-height: {{ settings.min_height_desktop | default(700) }}px;
      }
    }
  </style>
  {# prettier-ignore-end #}
</section>
