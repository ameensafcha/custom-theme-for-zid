{# Base classes for all buttons #}
{% set base_classes = 'inline-flex rounded items-center justify-center gap-2 whitespace-nowrap font-normal transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2' %}

{# Variant lookup #}
{%
  set variants = {
    'filled': 'outline outline-1 outline-primary text-primary-foreground bg-primary hover:outline-2 hover:bg-primary/90 active:outline-2 active:bg-primary/80 disabled:outline-[#DADADA] disabled:bg-foreground disabled:text-secondary',
    'outlined': 'outline outline-1 outline-primary text-primary bg-background hover:outline-2 active:outline-2 active:bg-[#F6F5F4]',
    'text': 'outline-0 outline-[#B5B5B5] text-primary hover:outline-1 bg-transparent active:bg-[#F6F5F4]'
  }
%}

{# Size lookup #}
{%
  set sizes = {
    'lg': 'px-4 py-3 text-[16px] leading-[24px]',
    'md': 'px-4 py-2 text-[14px] leading-[21px]',
    'sm': 'px-2 py-1.5 text-[12px] leading-[18px]',
    'icon-md': 'size-10 p-2.5',
    'icon-sm': 'size-8 p-2'
  }
%}

{# Get variant and size classes #}
{% set current_size = size|default('lg') %}
{% set variant_classes = variants[variant|default('filled')] %}
{% set size_classes = sizes[current_size] %}

{# Override variant for icon buttons #}
{% if current_size.startswith('icon-') %}
  {% set variant_classes = 'text-primary disabled:text-secondary' %}
{% endif %}

{# Combine all classes #}
{% set class_names = base_classes + ' ' + variant_classes + ' ' + size_classes + ' ' + (class|default('')) %}

{# Render as link or button #}
{% if href %}
  <a
    href="{{ href }}"
    class="{{ class_names }}"
    {% if aria_label %}aria-label="{{ aria_label }}"{% endif %}
    {{ attrs|default('')|safe }}
  >
    {{ content|safe }}
  </a>
{% else %}
  <button
    type="{{ type|default('button') }}"
    class="{{ class_names }}"
    {% if disabled %}disabled{% endif %}
    {% if aria_label %}aria-label="{{ aria_label }}"{% endif %}
    {{ attrs|default('')|safe }}
  >
    {{ content|safe }}
  </button>
{% endif %}
