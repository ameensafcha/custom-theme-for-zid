{% set has_gift = cart.gift_card_details and cart.gift_card_details | length > 0 %}
<div
  class="{{ 'hidden' if not has_gift }} flex gap-2 lg:gap-6"
  data-gift-card-display
>
  <div class="size-20 shrink-0 overflow-hidden rounded">
    <div
      class="bg-secondary text-muted {{ 'hidden' if cart.gift_card_details and cart.gift_card_details.card_design }} flex size-full items-center justify-center"
      data-gift-icon
    >
      <svg
        class="size-6"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M20 12v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7M12 21V8M3 8h18v4H3V8zM12 8a4 4 0 00-4-4c-1.5 0-3 1-3 2.5S6.5 8 8 8h4zm0 0a4 4 0 014-4c1.5 0 3 1 3 2.5S17.5 8 16 8h-4z"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>
    <img
      src="{{ image_url(cart.gift_card_details.card_design, w=160, q=85, f='auto') if cart.gift_card_details and cart.gift_card_details.card_design else '' }}"
      alt="{{ _('Gift') }}"
      class="{{ 'hidden' if not cart.gift_card_details or not cart.gift_card_details.card_design }} size-full object-cover"
      data-gift-image
    />
  </div>
  <div class="flex min-w-0 flex-1 flex-col gap-4 lg:flex-row lg:gap-6">
    <div class="flex min-w-0 flex-1 flex-col gap-1">
      <div class="flex items-start justify-between gap-2 lg:block">
        <div class="min-w-0 flex-1 lg:flex-none">
          <h3 class="text-foreground text-h6 text-caps">{{ _("Gift") }}</h3>
          <p class="text-muted text-body2 mt-0.5 lg:mt-1">
            <span>{{ _("Sender") }}:</span>
            <span data-gift-sender>{{ cart.gift_card_details.sender_name if cart.gift_card_details else '' }}</span>;
            <span>{{ _("Recipient") }}:</span>
            <span data-gift-receiver>{{ cart.gift_card_details.receiver_name if cart.gift_card_details else '' }}</span>
          </p>
          <p
            class="text-muted text-body2 {{ 'hidden' if not cart.gift_card_details or not cart.gift_card_details.gift_message }} mt-1"
            data-gift-message
          >
            {{ cart.gift_card_details.gift_message if cart.gift_card_details else '' }}
          </p>
          <p
            class="text-muted text-body2 {{ 'hidden' if not cart.gift_card_details or not cart.gift_card_details.media_link }} mt-1"
            data-gift-media-link
          >
            {{ cart.gift_card_details.media_link if cart.gift_card_details else '' }}
          </p>
        </div>
        <p class="text-foreground text-h6 text-caps shrink-0 lg:hidden">{{ _("Free") | upper }}</p>
      </div>
      <div class="flex items-center justify-end gap-1 lg:hidden">
        <button
          type="button"
          class="text-foreground flex size-8 items-center justify-center"
          data-action="gift-edit"
          aria-label="{{ _('Edit') }}"
        >
          <svg
            class="size-4"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.333 2A1.886 1.886 0 0114 4.667L5 13.667l-3 .666.667-3 9-9z"
              stroke="currentColor"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <button
          type="button"
          class="text-foreground flex size-8 items-center justify-center"
          data-action="gift-delete"
          aria-label="{{ _('Delete') }}"
        >
          <svg
            class="size-4"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2 4h12M5.333 4V2.667a1.333 1.333 0 011.334-1.334h2.666a1.333 1.333 0 011.334 1.334V4m2 0v9.333a1.333 1.333 0 01-1.334 1.334H4.667a1.333 1.333 0 01-1.334-1.334V4h9.334z"
              stroke="currentColor"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>
    </div>

    <div class="hidden w-48 flex-col items-end gap-2.5 lg:flex">
      <p class="text-foreground text-h6 text-caps">{{ _("Free") | upper }}</p>
      <div class="flex items-center gap-2">
        <button
          type="button"
          class="text-foreground hover:bg-secondary flex size-8 items-center justify-center rounded transition-colors"
          data-action="gift-edit"
          aria-label="{{ _('Edit') }}"
        >
          <svg
            class="size-4"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.333 2A1.886 1.886 0 0114 4.667L5 13.667l-3 .666.667-3 9-9z"
              stroke="currentColor"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <button
          type="button"
          class="text-foreground hover:text-destructive hover:bg-secondary flex size-8 items-center justify-center rounded transition-colors"
          data-action="gift-delete"
          aria-label="{{ _('Delete') }}"
          data-gift-delete-btn
        >
          <svg
            class="size-4"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            data-gift-delete-icon
          >
            <path
              d="M2 4h12M5.333 4V2.667a1.333 1.333 0 011.334-1.334h2.666a1.333 1.333 0 011.334 1.334V4m2 0v9.333a1.333 1.333 0 01-1.334 1.334H4.667a1.333 1.333 0 01-1.334-1.334V4h9.334z"
              stroke="currentColor"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <svg
            class="hidden size-4 animate-spin"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            data-gift-delete-spinner
          >
            <path d="M21 12a9 9 0 1 1-6.219-8.56" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>
