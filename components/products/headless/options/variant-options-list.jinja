{#
  Variant Options - List Style
  Renders clickable list items for variant selection.
  See docs/headless/variant-options-list.md for full documentation.
#}

{% if options %}
  {# Hidden parent ID - REQUIRED by product.js #}
  {% if product and product.has_variants %}
    <input
      id="product-parent-id"
      type="hidden"
      value="{{ product.id }}"
    />
  {% endif %}

  <div
    id="product-variants-options"
    class="product-options product-options--list"
  >
    {% for option in options %}
      {% set option_index = loop.index0 %}

      <div
        class="product-options__group"
        index="{{ option_index }}"
      >
        <label class="product-options__label">{{ option.name }}</label>

        <ul
          name="{{ option.name }}"
          index="{{ option_index }}"
          class="product-options__list"
        >
          {% for choice in option.choices %}
            {% set is_selected = false %}
            {% if product and product.selected_product and product.selected_product.attributes %}
              {% if product.selected_product.attributes[option_index] %}
                {% if product.selected_product.attributes[option_index].value == choice %}
                  {% set is_selected = true %}
                {% endif %}
              {% endif %}
            {% endif %}

            <li
              value="{{ choice }}"
              onclick="productOptionListItemClicked(event)"
              class="product-options__item{% if is_selected %}active{% endif %}"
            >
              <span class="product-options__item-text">{{ choice }}</span>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  </div>
{% endif %}
